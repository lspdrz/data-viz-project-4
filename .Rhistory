\clear
msleep %>% summarise(avg_sleep = mean(sleep_total))
msleep %>% summarise(sd_sleep = sd(sleep_total))
msleep %>%
summarise(avg_sleep = mean(sleep_total),
min_sleep = min(sleep_total),
max_sleep = max(sleep_total),
total = n())
sqlQuery <- data.world::qry_sql("with q1 as(SELECT powerball.county, powerball.salesfy11, powerball.salesfy12,
powerball.salesfy13, powerball.salesfy14, powerball.merge_loc, il.b17001_002 population_living_in_poverty
FROM powerball left join il on powerball.merge_loc = il.areaname)
SELECT q1.county, q1.salesfy11, q1.salesfy12, q1.salesfy13, q1.salesfy14,
q1.population_living_in_poverty, ilpop.b11002_001 total_population
FROM q1 left join ilpop on q1.merge_loc = ilpop.areaname")
powerBallCensusMerged <- data.world::query(sqlQuery, dataset=dataset_key)
sqlQuery <- data.world::qry_sql("with q1 as(SELECT powerball.county, powerball.salesfy11, powerball.salesfy12,
powerball.salesfy13, powerball.salesfy14, powerball.merge_loc, il.b17001_002 population_living_in_poverty
FROM powerball left join il on powerball.merge_loc = il.areaname)
SELECT q1.county, q1.salesfy11, q1.salesfy12, q1.salesfy13, q1.salesfy14,
q1.population_living_in_poverty, ilpop.b11002_001 total_population
FROM q1 left join ilpop on q1.merge_loc = ilpop.areaname")
powerBallCensusMerged <- data.world::query(sqlQuery, dataset=dataset_key)
dataset_key <- "https://data.world/tonypedraza/f-17-edv-project-3"
data.world::set_config(cfg_env("DW_API"))
library(tidyverse)
require(data.world)
knitr::opts_chunk$set(echo = TRUE)
dataset_key <- "https://data.world/tonypedraza/f-17-edv-project-3"
data.world::set_config(cfg_env("DW_API"))
sqlQuery <- data.world::qry_sql("with q1 as(SELECT powerball.county, powerball.salesfy11, powerball.salesfy12,
powerball.salesfy13, powerball.salesfy14, powerball.merge_loc, il.b17001_002 population_living_in_poverty
FROM powerball left join il on powerball.merge_loc = il.areaname)
SELECT q1.county, q1.salesfy11, q1.salesfy12, q1.salesfy13, q1.salesfy14,
q1.population_living_in_poverty, ilpop.b11002_001 total_population
FROM q1 left join ilpop on q1.merge_loc = ilpop.areaname")
powerBallCensusMerged <- data.world::query(sqlQuery, dataset=dataset_key)
sqlQuery <- data.world::qry_sql("with q1 as(SELECT powerball.county, powerball.salesfy11, powerball.salesfy12,
powerball.salesfy13, powerball.salesfy14, powerball.merge_loc, il.b17001_002 population_living_in_poverty
FROM powerball left join il on powerball.merge_loc = il.areaname)
SELECT q1.county, q1.salesfy11, q1.salesfy12, q1.salesfy13, q1.salesfy14,
q1.population_living_in_poverty, ilpop.b11002_001 total_population
FROM q1 left join ilpop on q1.merge_loc = ilpop.areaname")
powerBallCensusMerged <- data.world::query(sqlQuery, dataset=dataset_key)
head(powerBallCensusMerged)
sqlQuery <- data.world::qry_sql("with q1 as(SELECT powerball.county, powerball.salesfy11, powerball.salesfy12,
powerball.salesfy13, powerball.salesfy14, powerball.merge_loc, il.b17001_002 population_living_in_poverty
FROM powerball left join il on powerball.merge_loc = il.areaname)
SELECT q1.county, q1.salesfy11, q1.salesfy12, q1.salesfy13, q1.salesfy14,
q1.population_living_in_poverty, ilpop.b11002_001 total_population
FROM q1 left join ilpop on q1.merge_loc = ilpop.areaname")
powerBallCensusMerged <- data.world::query(sqlQuery, dataset=dataset_key)
head(powerBallCensusMerged)
sqlQuery <- data.world::qry_sql("with q1 as(SELECT powerball.county, powerball.salesfy11, powerball.salesfy12,
powerball.salesfy13, powerball.salesfy14, powerball.merge_loc, il.b17001_002 population_living_in_poverty
FROM powerball left join il on powerball.merge_loc = il.areaname)
SELECT q1.county, q1.salesfy11, q1.salesfy12, q1.salesfy13, q1.salesfy14,
q1.population_living_in_poverty, ilpop.b11002_001 total_population
FROM q1 left join ilpop on q1.merge_loc = ilpop.areaname")
powerBallCensusMerged <- data.world::query(sqlQuery, dataset=dataset_key)
powerBallCensusMerged
sqlQuery <- data.world::qry_sql("with q1 as(SELECT powerball.county, powerball.salesfy11, powerball.salesfy12,
powerball.salesfy13, powerball.salesfy14, powerball.merge_loc, il.b17001_002 population_living_in_poverty
FROM powerball left join il on powerball.merge_loc = il.areaname)
SELECT q1.county, q1.salesfy11, q1.salesfy12, q1.salesfy13, q1.salesfy14,
q1.population_living_in_poverty, ilpop.b11002_001 total_population
FROM q1 left join ilpop on q1.merge_loc = ilpop.areaname")
powerBallCensusMerged <- data.world::query(sqlQuery, dataset=dataset_key)
powerBallCensusMerged
sqlQuery <- data.world::qry_sql("with q1 as(SELECT powerball.county, powerball.salesfy11, powerball.salesfy12,
powerball.salesfy13, powerball.salesfy14, powerball.merge_loc, il.b17001_002 population_living_in_poverty
FROM powerball left join il on powerball.merge_loc = il.areaname)
SELECT q1.county, q1.salesfy11, q1.salesfy12, q1.salesfy13, q1.salesfy14,
q1.population_living_in_poverty, ilpop.b11002_001 total_population
FROM q1 left join ilpop on q1.merge_loc = ilpop.areaname")
powerBallCensusMerged <- data.world::query(sqlQuery, dataset=dataset_key)
powerBallCensusMerged
sqlQuery <- data.world::qry_sql("with q1 as(SELECT powerball.county, powerball.salesfy11, powerball.salesfy12,
powerball.salesfy13, powerball.salesfy14, powerball.merge_loc, il.b17001_002 population_living_in_poverty
FROM powerball left join il on powerball.merge_loc = il.areaname)
SELECT q1.county, q1.salesfy11, q1.salesfy12, q1.salesfy13, q1.salesfy14,
q1.population_living_in_poverty, ilpop.b11002_001 total_population
FROM q1 left join ilpop on q1.merge_loc = ilpop.areaname"
)
powerBallCensusMerged <- data.world::query(sqlQuery, dataset=dataset_key)
sqlQuery <- data.world::qry_sql("with q1 as(SELECT powerball.county, powerball.salesfy11, powerball.salesfy12,
powerball.salesfy13, powerball.salesfy14, powerball.merge_loc, il.b17001_002 population_living_in_poverty
FROM powerball left join il on powerball.merge_loc = il.areaname)
SELECT q1.county, q1.salesfy11, q1.salesfy12, q1.salesfy13, q1.salesfy14,
q1.population_living_in_poverty, ilpop.b11002_001 total_population
FROM q1 left join ilpop on q1.merge_loc = ilpop.areaname"
)
powerBallCensusMerged <- data.world::query(sqlQuery, dataset=dataset_key)
library(tidyverse)
require(data.world)
knitr::opts_chunk$set(echo = TRUE)
dataset_key <- "https://data.world/tonypedraza/f-17-edv-project-4"
data.world::set_config(cfg_env("DW_API"))
sqlQuery <- data.world::qry_sql("with q1 as(SELECT powerball.county, powerball.salesfy11, powerball.salesfy12,
powerball.salesfy13, powerball.salesfy14, powerball.merge_loc, il.b17001_002 population_living_in_poverty
FROM powerball left join il on powerball.merge_loc = il.areaname)
SELECT q1.county, q1.salesfy11, q1.salesfy12, q1.salesfy13, q1.salesfy14,
q1.population_living_in_poverty, ilpop.b11002_001 total_population
FROM q1 left join ilpop on q1.merge_loc = ilpop.areaname"
)
powerBallCensusMerged <- data.world::query(sqlQuery, dataset=dataset_key)
sqlQuery <- data.world::qry_sql("with q1 as(SELECT powerball.county, powerball.salesfy11, powerball.salesfy12,
powerball.salesfy13, powerball.salesfy14, powerball.merge_loc, il.b17001_002 population_living_in_poverty
FROM powerball left join il on powerball.merge_loc = il.areaname)
SELECT q1.county, q1.salesfy11, q1.salesfy12, q1.salesfy13, q1.salesfy14,
q1.population_living_in_poverty, ilpop.b11002_001 total_population
FROM q1 left join ilpop on q1.merge_loc = ilpop.areaname"
)
powerBallCensusMerged <- data.world::query(sqlQuery, dataset=dataset_key)
powerBallCensusMerged
powerBallCensusMerged %>%
tidyr::gather(salesfy11:salesfy14, key = "year", value="powerballSales", na.rm=TRUE) %>%
ggplot(aes(x=year, y=powerballSales, colour=county)) + geom_point() + geom_line()
powerBallCensusMerged %>%
tidyr::gather(salesfy11:salesfy14, key = "year", value="powerballSales", na.rm=TRUE) %>%
ggplot(aes(x=year, y=powerballSales)) + geom_point() + geom_line()
powerBallCensusMerged %>%
tidyr::gather(salesfy11:salesfy14, key = "year", value="powerballSales", na.rm=TRUE) %>%
ggplot(aes(x=year, y=powerballSales)) + geom_point(mappings=aes(colour=county)) + geom_line()
powerBallCensusMerged %>%
tidyr::gather(salesfy11:salesfy14, key = "year", value="powerballSales", na.rm=TRUE) %>%
ggplot(aes(x=year, y=powerballSales)) + geom_point(mapping=aes(colour=county)) + geom_line()
head(powerBallCensusMerged) %>%
tidyr::gather(salesfy11:salesfy14, key = "year", value="powerballSales", na.rm=TRUE) %>%
ggplot(aes(x=year, y=powerballSales)) + geom_point(mapping=aes(colour=county)) + geom_line()
head(powerBallCensusMerged) %>%
tidyr::gather(salesfy11:salesfy14, key = "year", value="powerballSales", na.rm=TRUE) %>%
ggplot(aes(x=year, y=powerballSales, colour=county)) + geom_point() + geom_line()
head(powerBallCensusMerged) %>%
tidyr::gather(salesfy11:salesfy14, key = "year", value="powerballSales", na.rm=TRUE) %>%
ggplot(aes(x=year, y=powerballSales, colour=county)) + geom_point() + geom_smooth()
head(powerBallCensusMerged) %>%
tidyr::gather(salesfy11:salesfy14, key = "year", value="powerballSales", na.rm=TRUE) %>%
ggplot(aes(x=year, y=powerballSales, colour=county)) + geom_point() + geom_line()
# The SQL query to join the datasets in data.world
sqlQuery <- data.world::qry_sql("with q1 as(SELECT powerball.county, powerball.salesfy11, powerball.salesfy12,
powerball.salesfy13, powerball.salesfy14, powerball.merge_loc, il.b17001_002 population_living_in_poverty
FROM powerball left join il on powerball.merge_loc = il.areaname)
SELECT q1.county, q1.salesfy11, q1.salesfy12, q1.salesfy13, q1.salesfy14,
q1.population_living_in_poverty, ilpop.b11002_001 total_population
FROM q1 left join ilpop on q1.merge_loc = ilpop.areaname"
)
# Import the data set returned by the query into a local data frame
powerBallCensusMerged <- data.world::query(sqlQuery, dataset=dataset_key)
View(powerBallCensusMerged)
powerBallCensusMerged %>%
tidyr::gather(as.Date(salesfy11:salesfy14), key = "year", value="powerballSales", na.rm=TRUE) %>%
ggplot(aes(x=year, y=powerballSales, colour=county)) + geom_point() + geom_line()
powerBallCensusMerged %>%
tidyr::gather(salesfy11:salesfy14, key = "year", value="powerballSales", na.rm=TRUE) %>%
ggplot(aes(x=year, y=powerballSales, colour=county)) + geom_point() + geom_line()
head(powerBallCensusMerged) %>%
tidyr::gather(salesfy11:salesfy14, key = "year", value="powerballSales", na.rm=TRUE) %>%
ggplot(aes(x=year, y=powerballSales, colour=county)) + geom_point() + geom_line()
head(powerBallCensusMerged) %>%
tidyr::gather(salesfy11:salesfy14, key = "year", value="powerballSales", na.rm=TRUE) %>%
ggplot(aes(x=as.Numeric(year), y=powerballSales, colour=county)) + geom_point() + geom_line()
head(powerBallCensusMerged) %>%
tidyr::gather(salesfy11:salesfy14, key = "year", value="powerballSales", na.rm=TRUE) %>%
ggplot(aes(x=as.numeric(year), y=powerballSales, colour=county)) + geom_point() + geom_line()
head(powerBallCensusMerged) %>%
tidyr::gather(salesfy11:salesfy14, key = "year", value="powerballSales", na.rm=TRUE) %>%
ggplot(aes(x=year, y=powerballSales, colour=county)) + geom_point() + geom_line()
head(powerBallCensusMerged) %>%
tidyr::gather(salesfy11:salesfy14, key = "year", value="powerballSales", na.rm=TRUE) %>%
ggplot(aes(x=year, y=powerballSales, colour=county)) + geom_bar()
head(powerBallCensusMerged) %>%
tidyr::gather(salesfy11:salesfy14, key = "year", value="powerballSales", na.rm=TRUE) %>%
ggplot(aes(x=year, colour=county)) + geom_bar()
head(powerBallCensusMerged) %>%
tidyr::gather(salesfy11:salesfy14, key = "year", value="powerballSales", na.rm=TRUE) %>%
ggplot(aes(x=year, identity=powerballSales, colour=county)) + geom_bar()
head(powerBallCensusMerged) %>%
tidyr::gather(salesfy11:salesfy14, key = "year", value="powerballSales", na.rm=TRUE) %>%
ggplot(aes(y=powerballSales, stat="identity", colour=county)) + geom_bar()
head(powerBallCensusMerged) %>%
tidyr::gather(salesfy11:salesfy14, key = "year", value="powerballSales", na.rm=TRUE) %>%
ggplot(aes(x=year, y=powerballSales, colour=county)) + geom_bar(stat="identity")
head(powerBallCensusMerged) %>%
tidyr::gather(salesfy11:salesfy14, key = "year", value="powerballSales", na.rm=TRUE) %>%
ggplot(aes(x=year, y=powerballSales)) + geom_bar(stat="identity")
powerBallCensusMerged %>%
tidyr::gather(salesfy11:salesfy14, key = "year", value="powerballSales", na.rm=TRUE) %>%
ggplot(aes(x=year, y=powerballSales, colour=county)) + geom_bar(stat="identity")
head(powerBallCensusMerged) %>%
tidyr::gather(salesfy11:salesfy14, key = "year", value="powerballSales", na.rm=TRUE) %>%
ggplot(aes(x=year, y=powerballSales, colour=county)) + geom_bar(stat="identity")
powerBallCensusMerged %>%
tidyr::gather(salesfy11:salesfy14, key = "year", value="powerballSales", na.rm=TRUE) %>%
dplyr::filter(powerBallSales > 10000000) %>%
ggplot(aes(x=year, y=powerballSales, colour=county)) + geom_bar(stat="identity")
powerBallCensusMerged %>%
tidyr::gather(salesfy11:salesfy14, key = "year", value="powerballSales", na.rm=TRUE) %>%
dplyr::filter(powerballSales > 10000000) %>%
ggplot(aes(x=year, y=powerballSales, colour=county)) + geom_bar(stat="identity")
powerBallCensusMerged %>%
tidyr::gather(salesfy11:salesfy14, key = "year", value="powerballSales", na.rm=TRUE) %>%
dplyr::filter(powerballSales > 10000000) %>%
ggplot(aes(x=year, y=powerballSales, colour=county)) + geom_point()
powerBallCensusMerged %>%
tidyr::gather(salesfy11:salesfy14, key = "year", value="powerballSales", na.rm=TRUE) %>%
dplyr::filter(sd(powerballSales) > 2) %>%
ggplot(aes(x=year, y=powerballSales, colour=county)) + geom_point()
powerBallCensusMerged %>%
tidyr::gather(salesfy11:salesfy14, key = "year", value="powerballSales", na.rm=TRUE) %>%
dplyr::filter(sd(powerballSales) > 5) %>%
ggplot(aes(x=year, y=powerballSales, colour=county)) + geom_point()
powerBallCensusMerged %>%
tidyr::gather(salesfy11:salesfy14, key = "year", value="powerballSales", na.rm=TRUE) %>%
dplyr::filter(powerBallSales > sd(powerballSales)) %>%
ggplot(aes(x=year, y=powerballSales, colour=county)) + geom_point()
powerBallCensusMerged %>%
tidyr::gather(salesfy11:salesfy14, key = "year", value="powerballSales", na.rm=TRUE) %>%
dplyr::filter(powerballSales > sd(powerballSales)) %>%
ggplot(aes(x=year, y=powerballSales, colour=county)) + geom_point()
powerBallCensusMerged %>%
tidyr::gather(salesfy11:salesfy14, key = "year", value="powerballSales", na.rm=TRUE) %>%
dplyr::filter(powerballSales > sd(powerballSales)) %>%
ggplot(aes(x=year, y=powerballSales, colour=county)) + geom_point() + geom_line()
powerBallCensusMerged %>%
tidyr::gather(salesfy11:salesfy14, key = "year", value="powerballSales", na.rm=TRUE) %>%
dplyr::filter(powerballSales > sd(powerballSales)) %>%
ggplot(aes(x=year, y=powerballSales, colour=county, group=1)) + geom_point() + geom_line()
powerBallCensusMerged %>%
tidyr::gather(salesfy11:salesfy14, key = "year", value="powerballSales", na.rm=TRUE) %>%
dplyr::filter(powerballSales > sd(powerballSales)) %>%
ggplot(aes(x=year, y=powerballSales, colour=county, group=year)) + geom_point() + geom_line()
powerBallCensusMerged %>%
tidyr::gather(salesfy11:salesfy14, key = "year", value="powerballSales", na.rm=TRUE) %>%
dplyr::filter(powerballSales > sd(powerballSales)) %>%
ggplot(aes(x=year, y=powerballSales, colour=county, group=county)) + geom_point() + geom_line()
powerBallCensusMerged %>%
tidyr::gather(salesfy12:salesfy14, key = "year", value="powerballSales", na.rm=TRUE) %>%
dplyr::filter(powerballSales > sd(powerballSales)) %>%
ggplot(aes(x=year, y=powerballSales, colour=county, group=county)) + geom_point() + geom_line()
powerBallCensusMerged %>%
tidyr::gather(salesfy11:salesfy14, key = "year", value="powerballSales", na.rm=TRUE) %>%
dplyr::filter(powerballSales > sd(powerballSales)) %>%
ggplot(aes(x=year, y=powerballSales, colour=county, group=county)) + geom_point() + geom_line()
powerBallCensusMerged %>%
tidyr::gather(salesfy11:salesfy14, key = "year", value="powerballSales", na.rm=TRUE) %>%
dplyr::filter(powerballSales > sd(powerballSales)) %>%
gplyr::group_by(county) %>%
ggplot(aes(x=year, y=powerballSales, colour=county, group=county)) + geom_point() + geom_line()
powerBallCensusMerged %>%
tidyr::gather(salesfy11:salesfy14, key = "year", value="powerballSales", na.rm=TRUE) %>%
dplyr::filter(powerballSales > sd(powerballSales)) %>%
dplyr::group_by(county) %>%
ggplot(aes(x=year, y=powerballSales, colour=county, group=county)) + geom_point() + geom_line()
powerBallCensusMerged %>%
tidyr::gather(salesfy11:salesfy14, key = "year", value="powerballSales", na.rm=TRUE) %>%
dplyr::filter(powerballSales > sd(powerballSales)) %>%
dplyr::group_by(county) %>%
ggplot(aes(x=year, y=powerballSales, colour=county)) + geom_point() + geom_line()
powerBallCensusMerged %>%
tidyr::gather(salesfy11:salesfy14, key = "year", value="powerballSales", na.rm=TRUE) %>%
dplyr::filter(powerballSales > sd(powerballSales)) %>%
dplyr::group_by(county) %>%
ggplot(aes(x=year, y=powerballSales, colour=county, group=county)) + geom_point() + geom_line()
require(tidyverse)
require(dplyr)
powerBall <- read_csv("preCensusMergeData.csv",
col_types = cols(
fy11 = col_number(),
fy12 = col_number(),
fy13 = col_number(),
fy14 = col_number(),
county = col_character(),
merge_loc = col_character()
))
# Add the sales per year for the each county, aggregate the counties, and remove the original sales columns
powerBall <- powerBall %>% dplyr::group_by(merge_loc) %>%
mutate(salesfy11 = sum(fy11, na.rm = TRUE)) %>%
mutate(salesfy12 = sum(fy12, na.rm = TRUE)) %>%
mutate(salesfy13 = sum(fy13, na.rm = TRUE)) %>%
mutate(salesfy14 = sum(fy14, na.rm=TRUE)) %>%
distinct(county, merge_loc, salesfy11, salesfy12, salesfy13, salesfy14)
library(tidyverse)
require(data.world)
knitr::opts_chunk$set(echo = TRUE)
sessionInfo()
dataset_key <- "https://data.world/tonypedraza/f-17-edv-project-4"
data.world::set_config(cfg_env("DW_API"))
require(tidyverse)
require(dplyr)
powerBall <- read_csv("preCensusMergeData.csv",
col_types = cols(
fy11 = col_number(),
fy12 = col_number(),
fy13 = col_number(),
fy14 = col_number(),
county = col_character(),
merge_loc = col_character()
))
# Add the sales per year for the each county, aggregate the counties, and remove the original sales columns
powerBall <- powerBall %>% dplyr::group_by(merge_loc) %>%
mutate(salesfy11 = sum(fy11, na.rm = TRUE)) %>%
mutate(salesfy12 = sum(fy12, na.rm = TRUE)) %>%
mutate(salesfy13 = sum(fy13, na.rm = TRUE)) %>%
mutate(salesfy14 = sum(fy14, na.rm=TRUE)) %>%
distinct(county, merge_loc, salesfy11, salesfy12, salesfy13, salesfy14)
require(tidyverse)
require(dplyr)
powerBall <- read_csv("preCensusMergeData.csv",
col_types = cols(
fy11 = col_number(),
fy12 = col_number(),
fy13 = col_number(),
fy14 = col_number(),
county = col_character(),
merge_loc = col_character()
))
# Add the sales per year for the each county, aggregate the counties, and remove the original sales columns
powerBall <- powerBall %>% dplyr::group_by(merge_loc) %>%
mutate(salesfy11 = sum(fy11, na.rm = TRUE)) %>%
mutate(salesfy12 = sum(fy12, na.rm = TRUE)) %>%
mutate(salesfy13 = sum(fy13, na.rm = TRUE)) %>%
mutate(salesfy14 = sum(fy14, na.rm=TRUE)) %>%
distinct(county, merge_loc, salesfy11, salesfy12, salesfy13, salesfy14)
require(tidyverse)
require(dplyr)
powerBall <- read_csv("preCensusMergeData.csv",
col_types = cols(
fy11 = col_number(),
fy12 = col_number(),
fy13 = col_number(),
fy14 = col_number(),
county = col_character(),
merge_loc = col_character()
))
# Add the sales per year for the each county, aggregate the counties, and remove the original sales columns
powerBall <- powerBall %>% dplyr::group_by(merge_loc) %>%
mutate(salesfy11 = sum(fy11, na.rm = TRUE)) %>%
mutate(salesfy12 = sum(fy12, na.rm = TRUE)) %>%
mutate(salesfy13 = sum(fy13, na.rm = TRUE)) %>%
mutate(salesfy14 = sum(fy14, na.rm=TRUE)) %>%
distinct(county, merge_loc, salesfy11, salesfy12, salesfy13, salesfy14)
require(tidyverse)
require(dplyr)
powerBall <- read_csv("preCensusMergeData.csv",
col_types = cols(
fy11 = col_number(),
fy12 = col_number(),
fy13 = col_number(),
fy14 = col_number(),
county = col_character(),
merge_loc = col_character()
))
# Add the sales per year for the each county, aggregate the counties, and remove the original sales columns
powerBall <- powerBall %>% dplyr::group_by(merge_loc) %>%
mutate(salesfy11 = sum(fy11, na.rm = TRUE)) %>%
mutate(salesfy12 = sum(fy12, na.rm = TRUE)) %>%
mutate(salesfy13 = sum(fy13, na.rm = TRUE)) %>%
mutate(salesfy14 = sum(fy14, na.rm=TRUE)) %>%
distinct(county, merge_loc, salesfy11, salesfy12, salesfy13, salesfy14)
require(tidyverse)
require(dplyr)
powerBall <- read_csv("preCensusMergeData.csv",
col_types = cols(
fy11 = col_number(),
fy12 = col_number(),
fy13 = col_number(),
fy14 = col_number(),
county = col_character(),
merge_loc = col_character()
))
# Add the sales per year for the each county, aggregate the counties, and remove the original sales columns
powerBall <- powerBall %>% group_by(merge_loc) %>%
mutate(salesfy11 = sum(fy11, na.rm = TRUE)) %>%
mutate(salesfy12 = sum(fy12, na.rm = TRUE)) %>%
mutate(salesfy13 = sum(fy13, na.rm = TRUE)) %>%
mutate(salesfy14 = sum(fy14, na.rm=TRUE)) %>%
distinct(county, merge_loc, salesfy11, salesfy12, salesfy13, salesfy14)
require(tidyverse)
require(dplyr)
powerBall <- read_csv("preCensusMergeData.csv",
col_types = cols(
fy11 = col_number(),
fy12 = col_number(),
fy13 = col_number(),
fy14 = col_number(),
county = col_character(),
merge_loc = col_character()
))
# Add the sales per year for the each county, aggregate the counties, and remove the original sales columns
powerBall <- powerBall %>% group_by(merge_loc) %>%
mutate(salesfy11 = sum(fy11, na.rm = TRUE)) %>%
mutate(salesfy12 = sum(fy12, na.rm = TRUE)) %>%
mutate(salesfy13 = sum(fy13, na.rm = TRUE)) %>%
mutate(salesfy14 = sum(fy14, na.rm=TRUE)) %>%
distinct(county, merge_loc, salesfy11, salesfy12, salesfy13, salesfy14)
library(tidyverse)
require(data.world)
knitr::opts_chunk$set(echo = TRUE)
sessionInfo()
dataset_key <- "https://data.world/tonypedraza/f-17-edv-project-4"
data.world::set_config(cfg_env("DW_API"))
require(tidyverse)
require(dplyr)
powerBall <- read_csv("preCensusMergeData.csv",
col_types = cols(
fy11 = col_number(),
fy12 = col_number(),
fy13 = col_number(),
fy14 = col_number(),
county = col_character(),
merge_loc = col_character()
))
# Add the sales per year for the each county, aggregate the counties, and remove the original sales columns
powerBall <- powerBall %>% group_by(merge_loc) %>%
mutate(salesfy11 = sum(fy11, na.rm = TRUE)) %>%
mutate(salesfy12 = sum(fy12, na.rm = TRUE)) %>%
mutate(salesfy13 = sum(fy13, na.rm = TRUE)) %>%
mutate(salesfy14 = sum(fy14, na.rm=TRUE)) %>%
distinct(county, merge_loc, salesfy11, salesfy12, salesfy13, salesfy14)
library(tidyverse)
require(data.world)
knitr::opts_chunk$set(echo = TRUE)
require(tidyverse)
require(dplyr)
powerBall <- read_csv("preCensusMergeData.csv",
col_types = cols(
fy11 = col_number(),
fy12 = col_number(),
fy13 = col_number(),
fy14 = col_number(),
county = col_character(),
merge_loc = col_character()
))
# Add the sales per year for the each county, aggregate the counties, and remove the original sales columns
powerBall <- powerBall %>% group_by(merge_loc) %>%
mutate(salesfy11 = sum(fy11, na.rm = TRUE)) %>%
mutate(salesfy12 = sum(fy12, na.rm = TRUE)) %>%
mutate(salesfy13 = sum(fy13, na.rm = TRUE)) %>%
mutate(salesfy14 = sum(fy14, na.rm=TRUE)) %>%
distinct(county, merge_loc, salesfy11, salesfy12, salesfy13, salesfy14)
setwd("~/Projects/nest/data-viz-project-4")
require(tidyverse)
require(dplyr)
powerBall <- read_csv("preCensusMergeData.csv",
col_types = cols(
fy11 = col_number(),
fy12 = col_number(),
fy13 = col_number(),
fy14 = col_number(),
county = col_character(),
merge_loc = col_character()
))
# Add the sales per year for the each county, aggregate the counties, and remove the original sales columns
powerBall <- powerBall %>% group_by(merge_loc) %>%
mutate(salesfy11 = sum(fy11, na.rm = TRUE)) %>%
mutate(salesfy12 = sum(fy12, na.rm = TRUE)) %>%
mutate(salesfy13 = sum(fy13, na.rm = TRUE)) %>%
mutate(salesfy14 = sum(fy14, na.rm=TRUE)) %>%
distinct(county, merge_loc, salesfy11, salesfy12, salesfy13, salesfy14)
# The SQL query to join the datasets in data.world
sqlQuery <- data.world::qry_sql("with q1 as(SELECT powerball.county, powerball.salesfy11, powerball.salesfy12,
powerball.salesfy13, powerball.salesfy14, powerball.merge_loc, il.b17001_002 population_living_in_poverty
FROM powerball left join il on powerball.merge_loc = il.areaname)
SELECT q1.county, q1.salesfy11, q1.salesfy12, q1.salesfy13, q1.salesfy14,
q1.population_living_in_poverty, ilpop.b11002_001 total_population
FROM q1 left join ilpop on q1.merge_loc = ilpop.areaname"
)
# Import the data set returned by the query into a local data frame
powerBallCensusMerged <- data.world::query(sqlQuery, dataset=dataset_key)
powerBallCensusMerged %>%
tidyr::gather(salesfy11:salesfy14, key = "year", value="powerballSales", na.rm=TRUE) %>%
dplyr::filter(powerballSales > sd(powerballSales)) %>%
ggplot(aes(x=year, y=powerballSales, colour=county, group=county)) + geom_point() + geom_line()
renderPlot(
powerBallCensusMerged %>%
tidyr::gather(salesfy11:salesfy14, key = "year", value="powerballSales", na.rm=TRUE) %>%
dplyr::filter(powerballSales > sd(powerballSales)) %>%
ggplot(aes(x=year, y=powerballSales, colour=county, group=county)) + geom_point() + geom_line()
)
renderPlot(
powerBallCensusMerged %>%
tidyr::gather(salesfy11:salesfy14, key = "year", value="powerballSales", na.rm=TRUE) %>%
dplyr::arrange(county)
dplyr::filter(powerballSales > sd(powerballSales)) %>%
ggplot(aes(x=year, y=powerballSales, colour=county, group=county)) + geom_point() + geom_line()
)
renderPlot(
powerBallCensusMerged %>%
tidyr::gather(salesfy11:salesfy14, key = "year", value="powerballSales", na.rm=TRUE) %>%
dplyr::arrange(county) %>%
dplyr::filter(powerballSales > sd(powerballSales)) %>%
ggplot(aes(x=year, y=powerballSales, colour=county, group=county)) + geom_point() + geom_line()
)
renderPlot(
head(powerBallCensusMerged) %>%
tidyr::gather(salesfy11:salesfy14, key = "year", value="powerballSales", na.rm=TRUE) %>%
dplyr::arrange(county) %>%
dplyr::filter(powerballSale) %>%
ggplot(aes(x=year, y=powerballSales, colour=county, group=county)) + geom_point() + geom_line()
)
renderPlot(
head(powerBallCensusMerged) %>%
tidyr::gather(salesfy11:salesfy14, key = "year", value="powerballSales", na.rm=TRUE) %>%
dplyr::arrange(county) %>%
ggplot(aes(x=year, y=powerballSales, colour=county, group=county)) + geom_point() + geom_line()
)
renderPlot(
head(powerBallCensusMerged) %>%
tidyr::gather(salesfy11:salesfy14, key = "year", value="powerballSales", na.rm=TRUE) %>%
dplyr::arrange(county) %>%
ggplot(aes(x=year, y=powerballSales, colour=county, group=county)) + geom_point() + geom_line()
)
